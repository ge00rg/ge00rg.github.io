---
layout: default
---
<style>
.feature-image header{
    background-image: url('{{ site.baseurl }}/assets/img/banners/{{ page.banner-img }}')
    }
@media screen and (max-width: 800px) {
    .feature-image header{background-image: url('')}
}
</style>

<article {% if page.banner-img %}class="feature-image"{% endif %}>
    <header id="main">
        <h1 align="left" id="{{ page.title | default: "" | cgi_escape }}" class="title">
            {{ page.title }}
        </h1>
    
        {% if page.subtitle %}
            <h2 align="left" class="subtitle">{{ page.subtitle }}</h2>
        {% endif %}
    </header>

    <section class="post-content">
        {% if page.bootstrap %}
            <div class="bootstrap-iso">
        {% endif %}
        {{ content }}
        {% if page.bootstrap %}
            </div>
        {% endif %}
    </section>
    
  <!-- Tag list for portfolio -->
    {% capture tag_list %}{{ page.tags | join: "|"}}{% endcapture %}
    {% include tags_list.html tags=tag_list %}
    
</article>

{% assign max_posts=2 %}
{% assign talks=site.talks | sort: 'date' %}
{% assign max_events=3 %}
<div class="side_events">
    <h1>Latest News</h1>
    {% assign i=0 %}
    {% for post in site.posts %}
        {% if i < max_posts %}
            <a class="post-link" href="{{ post.url | prepend: site.baseurl }}">
                {{post.title}}<br>
                <div class="date">{{post.date | date: '%B %d, %Y'}}</div>
            </a>
        {% endif %}
        {% assign i = i | plus:1 %}
    {% endfor %}
    <h1>Upcoming Events</h1>

    {% capture nowunix %}{{'now' | date: '%s'}}{% endcapture %}
    {% assign future_talks=""|split:"," %}
    {% for post in talks %}
        {% capture posttime %}{{post.date | date: '%s'}}{% endcapture %}
        {% if posttime > nowunix %}
            {% assign future_talks=future_talks|push:post %}
        {% endif %}
    {% endfor %}
    {% assign future_talks=future_talks|sort: 'date' %}

{% capture this_year %}{{'now' | date: '%Y'}}{% endcapture %}
{% assign last_year=this_year| minus:1 %}

<table id="future_events" style="display:none;">
<thead>
    <tr><th>year</th><th>date</th><th>speaker</th><th>affiliation</th><th>url</th><th>priority</th></tr>
</thead>
<tbody>
    {% for talk in talks %}
	{% assign talk_year=talk.date|date:'%Y' %}
	{% assign talk_year=talk_year|plus:0 %}
	{% if talk_year >= last_year %}
	    <tr>
	    <td>{{talk_year}}</td>
		<td>{{talk.date}}</td>
		<td>{{talk.speaker}}</td>
		<td>{{talk.affiliation}}</td>
		<td>{{ talk.url | prepend: site.baseurl }}</td>
        <td>{{talk.priority}}</td>
	    </tr>
	{% endif %}
    {% endfor %}
</tbody>
</table>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script>
var today = new Date();
	
var table = document.getElementById("future_events");
var cells;
	
var priority;
	
var j = 1;
while(j < table.rows.length){
    cells = table.rows[j].cells;
    priority = cells[5].innerHTML;
    priority_dt = new Date(priority);
    if (priority){
	    alert(priority);
	    if (priority_dt <= today){
		    alert('aaa');
	    }
    }
    j += 1
			     }
</script>

<!--
    {% assign i=0 %}

    {% for post in talks %}
        {% if post.priority %}
            {% capture postpriotime %}{{post.priority | date: '%s'}}{% endcapture %}
            {% if postpriotime <= nowunix %}
                {% capture posttime %}{{post.date | date: '%s'}}{% endcapture %}
                {% if posttime > nowunix %}
                    {% if i < max_events %}
                        <a class="post-link" href="{{ post.url | prepend: site.baseurl }}">
                            <span>{{post.speaker}}{% if post.affiliation %} [{{post.affiliation}}]{% endif %}</span><br>
                            <div class="date">{{post.date | date: '%B %d, %Y'}}</div>
                        </a>
                        {% assign i = i | plus:1 %}
                    {% endif %}
                {% endif %}
            {% endif %}
        {% endif %}
    {% endfor %}
-->

    {% for post in talks %}
        {% unless post.priority %}
            {% capture posttime %}{{post.date | date: '%s'}}{% endcapture %}
            {% if posttime > nowunix %}
                {% if i < max_events %}
                    <a class="post-link" href="{{ post.url | prepend: site.baseurl }}">
                        <span>{{post.speaker}}{% if post.affiliation %} [{{post.affiliation}}]{% endif %}</span><br>
                        <div class="date">{{post.date | date: '%B %d, %Y'}}</div>
                    </a>
                    {% assign i = i | plus:1 %}
                {% endif %}
            {% endif %}
        {% endunless %}
    {% endfor %}
</div>
